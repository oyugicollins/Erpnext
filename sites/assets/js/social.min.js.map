{"version":3,"file":"social.min.js","sources":["../../../apps/frappe/frappe/public/js/frappe/social/components/PostAction.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostComment.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostDropdownMenu.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/Post.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostLoader.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/PostSidebar.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ActivitySidebar.vue","../../../apps/frappe/frappe/public/js/frappe/social/pages/Wall.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ProfileSidebar.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ProfileBanner.vue","../../../apps/frappe/frappe/public/js/frappe/social/pages/Profile.vue","../../../apps/frappe/frappe/public/js/frappe/social/components/ImageViewer.vue","../../../apps/frappe/frappe/public/js/frappe/social/Home.vue","../../../apps/frappe/frappe/public/js/frappe/social/social_home.js"],"sourcesContent":["<template>\n\t<div class=\"post-action-container\">\n\t\t<div class=\"like\" @click=\"$emit('toggle_like')\">\n\t\t\t<i class=\"octicon octicon-heart\" :class=\"{'liked': post_liked}\"></i>\n\t\t\t<span class=\"likes\" :data-liked-by=\"liked_by_data\">{{ like_count }}</span>\n\t\t</div>\n\t\t<div class=\"comment\" @click=\"$emit('toggle_comment')\">\n\t\t\t<i class=\"octicon octicon-comment\"></i>\n\t\t\t<span class=\"comment_count\">{{ comment_count }}</span>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: [\n\t\t'liked_by',\n\t\t'comment_count',\n\t],\n\tcomputed: {\n\t\tlike_count() {\n\t\t\treturn this.split_string(this.liked_by).length;\n\t\t},\n\t\tpost_liked() {\n\t\t\treturn this.split_string(this.liked_by).includes(frappe.session.user);\n\t\t},\n\t\tliked_by_data() {\n\t\t\treturn JSON.stringify(this.split_string(this.liked_by));\n\t\t}\n\t},\n\tmethods: {\n\t\tsplit_string(str) {\n\t\t\treturn str && str !== '' ? str.split('\\n') : []\n\t\t}\n\t}\n}\n</script>\n<style lang='less' scoped>\n.post-action-container {\n\tdisplay: flex;\n\tbackground-color: #F6F6F6;\n\tpadding: 10px;\n\t.comment, .like {\n\t\tpadding-right: 20px;\n\t\tcursor: pointer;\n\t\tcolor: #8d99a6;\n\t\tspan {\n\t\t\tpadding-left: 5px;\n\t\t}\n\t\t&:hover {\n\t\t\tcolor: darken(#8d99a6, 10%);\n\t\t}\n\t}\n\t.likes {\n\t\tcursor: pointer;\n\t}\n\t.liked {\n\t\tcolor: #fc4f51;\n\t\t&:hover {\n\t\t\tcolor: lighten(#fc4f51, 10%) !important;\n\t\t}\n\t}\n\t.pinned {\n\t\tcolor: black;\n\t}\n}\n</style>","<template>\n\t<div>\n\t\t<div class=\"comment-box flex-column\">\n\t\t\t<div class=\"text-muted comment-label\">{{ __('Add a comment') }}</div>\n\t\t\t<textarea v-model=\"comment_content\"></textarea>\n\t\t\t<button\n\t\t\t\t:disabled=\"comment_content === ''\"\n\t\t\t\tclass=\"btn btn-primary btn-sm\"\n\t\t\t\t@click=\"create_comment\">\n\t\t\t\t{{ __('Comment') }}\n\t\t\t</button>\n\t\t</div>\n\t\t<div v-if=\"comments.length\" class=\"comment-list\">\n\t\t\t<div class=\"comment\" v-for=\"comment in comments\" :key=\"comment.name\">\n\t\t\t\t<span\n\t\t\t\t\tclass=\"pull-right text-muted\"\n\t\t\t\t\tv-html=\"get_time(comment.creation)\">\n\t\t\t\t</span>\n\t\t\t\t<span\n\t\t\t\t\tclass=\"cursor-pointer\"\n\t\t\t\t\t@click=\"go_to_profile_page(comment.owner)\"\n\t\t\t\t\tv-html=\"get_avatar(comment.owner)\">\n\t\t\t\t</span>\n\t\t\t\t<span>{{ comment.content }}</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['comments'],\n\tdata() {\n\t\treturn {\n\t\t\tcomment_content: ''\n\t\t}\n\t},\n\tmethods: {\n\t\tget_avatar(user) {\n\t\t\treturn frappe.avatar(user)\n\t\t},\n\t\tget_time(timestamp) {\n\t\t\treturn comment_when(timestamp, true)\n\t\t},\n\t\tcreate_comment() {\n\t\t\tthis.$emit('create_comment', this.comment_content);\n\t\t\tthis.comment_content = '';\n\t\t},\n\t\tgo_to_profile_page(user) {\n\t\t\tfrappe.set_route('social', 'profile', user)\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.comment-box {\n\t.comment-label {\n\t\tmargin-bottom: 5px;\n\t}\n\ttextarea {\n\t\twidth: 100%;\n\t\tborder-radius: 4px;\n\t\toutline: none;\n\t\tborder: none;\n\t\tmargin-bottom: 15px;\n\t\theight: 60px;\n\t\tpadding: 5px;\n\t\tborder: 1px solid #d1d8dd;\n\t\tresize: none;\n\t}\n\tbutton {\n\t\tpadding: 2px 5px;\n\t\tfont-size: 10px;\n\t\talign-self: flex-end;\n\t}\n}\n.comment-list {\n\tmargin-top: 10px;\n\t.comment {\n\t\tpadding: 5px 0;\n\t}\n}\n</style>\n","<template>\n\t<div class=\"dropdown\">\n\t\t<span class=\"caret cursor-pointer dropdown-toggle\" data-toggle=\"dropdown\"></span>\n\t\t<ul class=\"dropdown-menu\">\n\t\t\t<li v-for=\"option in options\" :key=\"option.label\">\n\t\t\t\t<a @click=\"option.action\">{{option.label}}</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['options'],\n}\n</script>\n<style lang=\"less\" scoped>\n.dropdown-menu {\n\tmin-width: 100px;\n\tleft: auto;\n\tright: 0;\n\ta {\n\t\tpadding: 12px;\n\t\tfont-size: 10px;\n\t}\n}\n</style>\n\n","<template>\n\t<div class=\"post-card\">\n\t\t<div class=\"post-body\" :class=\"{'pinned ': is_pinned}\">\n\t\t\t<div class=\"pull-right flex\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"pin-option\"\n\t\t\t\t\tv-if=\"is_pinned\">\n\t\t\t\t\tGlobally Pinned\n\t\t\t\t</div>\n\t\t\t\t<post-dropdown-menu\n\t\t\t\t\tclass=\"post-dropdown-menu\"\n\t\t\t\t\tv-if=\"options.length\"\n\t\t\t\t\t:options=\"options\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"user-avatar\" v-html=\"user_avatar\" @click=\"goto_profile(post.owner)\"></div>\n\t\t\t<a class=\"user-name\" @click=\"goto_profile(post.owner)\">{{ user_name }}</a>\n\t\t\t<div class=\"text-muted\" v-html=\"post_time\"></div>\n\t\t\t<div ref=\"content\" class=\"content\" v-html=\"post.content\"></div>\n\t\t</div>\n\t\t<post-action\n\t\t\t:liked_by=\"post.liked_by\"\n\t\t\t:comment_count=\"comments.length\"\n\t\t\t@toggle_comment=\"toggle_comment\"\n\t\t\t@toggle_like=\"toggle_like\"\n\t\t/>\n\t\t<post-comment\n\t\t\tv-if=\"show_comments\"\n\t\t\tclass=\"post-comments\"\n\t\t\t:comments=\"comments\"\n\t\t\t@create_comment=\"create_comment\"\n\t\t/>\n\t</div>\n</template>\n<script>\nimport PostAction from './PostAction.vue';\nimport PostComment from './PostComment.vue';\nimport PostDropdownMenu from './PostDropdownMenu.vue';\n\nexport default {\n\tprops: ['post'],\n\tcomponents: {\n\t\tPostAction,\n\t\tPostComment,\n\t\tPostDropdownMenu\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser_avatar: frappe.avatar(this.post.owner, 'avatar-medium'),\n\t\t\tpost_time: comment_when(this.post.creation),\n\t\t\tuser_name: frappe.user_info(this.post.owner).fullname,\n\t\t\tcomment_count: 0,\n\t\t\tcomments: [],\n\t\t\tshow_comments: false,\n\t\t\tis_globally_pinnable: frappe.user_roles.includes('System Manager') && frappe.social.is_home_page(),\n\t\t\tis_pinnable: false,\n\t\t\tis_user_post_owner: this.post.owner === frappe.session.user\n\t\t}\n\t},\n\tcomputed: {\n\t\tcan_pin() {\n\t\t\treturn this.is_globally_pinnable || this.is_pinnable\n\t\t},\n\t\tis_pinned() {\n\t\t\treturn false && frappe.social.is_profile_page(this.post.owner)\n\t\t\t\t|| this.post.is_globally_pinned && frappe.social.is_home_page()\n\t\t},\n\t\toptions() {\n\t\t\tconst options = []\n\t\t\tif (this.can_pin) {\n\t\t\t\tif (this.is_pinned) {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\t'label': __('Unpin'),\n\t\t\t\t\t\t'action': this.toggle_pin\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\t'label': __('Pin Globally'),\n\t\t\t\t\t\t'action': this.toggle_pin\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.is_user_post_owner) {\n\t\t\t\toptions.push({\n\t\t\t\t\t'label': __('Delete'),\n\t\t\t\t\t'action': this.delete_post\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t},\n\tcreated() {\n\t\tfrappe.db.get_list('Post Comment', {\n\t\t\tfields: ['name', 'content', 'owner', 'creation'],\n\t\t\torder_by: 'creation desc',\n\t\t\tfilters: {\n\t\t\t\tparent: this.post.name\n\t\t\t}\n\t\t}).then(comments => {\n\t\t\tthis.comments = comments;\n\t\t})\n\n\t\tif (!this.post.liked_by) {\n\t\t\tthis.$set(this.post, 'liked_by', '')\n\t\t}\n\n\t\tfrappe.realtime.on('new_post_comment' + this.post.name, (comment) => {\n\t\t\tthis.comments = [comment].concat(this.comments);\n\t\t})\n\t\tfrappe.realtime.on('update_liked_by' + this.post.name, this.update_liked_by)\n\n\t\tfrappe.realtime.on('delete_post' + this.post.name, () => {\n\t\t\tthis.$emit('delete-post')\n\t\t})\n\n\t\tthis.$root.$on('user_image_updated', () => {\n\t\t\tthis.user_avatar = frappe.avatar(this.post.owner, 'avatar-medium')\n\t\t})\n\n\t},\n\tmounted() {\n\t\tthis.$refs['content'].querySelectorAll('img').forEach((img) => {\n\t\t\timg.addEventListener('click', () => {\n\t\t\t\tthis.$root.$emit('show_preview', img.src);\n\t\t\t})\n\t\t});\n\n\t\tthis.$refs['content'].querySelectorAll('a').forEach(link_element => {\n\t\t\t// to open link in new tab\n\t\t\tlink_element.target = 'blank';\n\t\t\tthis.generate_preview(link_element);\n\t\t})\n\t},\n\tmethods: {\n\t\tgoto_profile(user) {\n\t\t\tfrappe.set_route('social', 'profile/' + user)\n\t\t},\n\t\ttoggle_comment() {\n\t\t\tthis.show_comments = !this.show_comments\n\t\t},\n\t\tupdate_liked_by(liked_by) {\n\t\t\tthis.post.liked_by = liked_by;\n\t\t},\n\t\ttoggle_like() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.toggle_like', {\n\t\t\t\tpost_name: this.post.name,\n\t\t\t})\n\t\t},\n\t\ttoggle_pin() {\n\t\t\tif (this.is_globally_pinnable) {\n\t\t\t\tfrappe.db.set_value('Post', this.post.name, 'is_globally_pinned', cint(!this.is_pinned))\n\t\t\t\t\t.then(res => this.post.is_globally_pinned = cint(res.message.is_globally_pinned))\n\t\t\t}\n\t\t\tif (this.is_pinnable) {\n\t\t\t\tfrappe.db.set_value('Post', this.post.name, 'is_pinned', cint(!this.is_pinned))\n\t\t\t\t\t.then(res => this.post.is_pinned = cint(res.message.is_pinned))\n\t\t\t}\n\t\t},\n\t\tcreate_comment(content) {\n\t\t\tconst comment = frappe.model.get_new_doc('Post Comment');\n\t\t\tcomment.content = content\n\t\t\tcomment.parent = this.post.name;\n\t\t\tfrappe.db.insert(comment);\n\t\t},\n\t\tdelete_post() {\n\t\t\tfrappe.confirm(__(\"Are you sure you want to delete this post?\"), () => {\n\t\t\t\tfrappe.dom.freeze();\n\t\t\t\tfrappe.xcall('frappe.social.doctype.post.post.delete_post', {\n\t\t\t\t\t'post_name': this.post.name\n\t\t\t\t}).then(frappe.dom.unfreeze)\n\t\t\t})\n\t\t},\n\t\tgenerate_preview(link_element) {\n\t\t\t// TODO: move the code to separate component\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.get_link_info', {\n\t\t\t\t'url': link_element.href\n\t\t\t}).then(info => {\n\t\t\t\tconst title = frappe.ellipsis(info['og:title'] || info['title'], 60)\n\t\t\t\tconst description = frappe.ellipsis(info['og:description'] || info['description'], 280)\n\t\t\t\tconst image = info['og:image'];\n\t\t\t\tconst url = info['og:url'];\n\n\t\t\t\tif (title) {\n\t\t\t\t\tlink_element.insertAdjacentHTML('afterend', `\n\t\t\t\t\t\t<a href=\"${url}\" target=\"blank\" class=\"preview-card\" class=\"flex\">\n\t\t\t\t\t\t\t<img src=\"${image}\"/>\n\t\t\t\t\t\t\t<div class=\"flex-column\">\n\t\t\t\t\t\t\t\t<h5>${title}</h5>\n\t\t\t\t\t\t\t\t<p class=\"text-muted\">${description}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t` );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(console.error)\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.post-comments {\n\tpadding: 15px 46px;\n\tpadding-top: 0px;\n\tbackground: #F6F6F6;\n}\n</style>\n\n","<template>\n\t<div>\n\t\t<post-skeleton v-for=\"index in 5\" :key=\"index\" v-if=\"loading_posts && !posts.length\"/>\n\t\t<transition-group name=\"flip-list\">\n\t\t\t<post\n\t\t\t\t:post=\"post\"\n\t\t\t\tv-for=\"(post, index) in posts\"\n\t\t\t\t:key=\"post.name\"\n\t\t\t\t@delete-post=\"delete_post(index)\"\n\t\t\t/>\n\t\t</transition-group>\n\t\t<div v-if=\"!loading_posts && !posts.length\" class=\"no-post-message text-muted\">\n\t\t\t{{ __('No posts yet') }}\n\t\t</div>\n\t\t<div\n\t\t\tv-show=\"loading_posts && posts.length\"\n\t\t\tclass=\"text-center padding\">\n\t\t\t{{ __('Fetching posts...') }}\n\t\t</div>\n\t\t<div\n\t\t\tv-show=\"posts.length && !loading_posts && !more_posts_available\"\n\t\t\tclass=\"text-center padding\">\n\t\t\t{{ __(\"That's all folks\") }}\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport Post from './Post.vue';\nimport PostSkeleton from './PostSkeleton.vue';\n\nexport default {\n\tprops: ['post_list_filter'],\n\tcomponents: {\n\t\tPost,\n\t\tPostSkeleton\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tposts: [],\n\t\t\tmore_posts_available: true,\n\t\t\tloading_posts: false,\n\t\t\tload_new: false\n\t\t}\n\t},\n\tcreated() {\n\t\twindow.addEventListener('scroll', this.handle_scroll);\n\t\tthis.update_posts();\n\t\tthis.$parent.$on('load_new_posts', () => {\n\t\t\tthis.update_posts()\n\t\t})\n\t\tfrappe.realtime.on('global_pin', () => {\n\t\t\tthis.update_posts()\n\t\t})\n\t},\n\twatch: {\n\t\tpost_list_filter(old_val, new_val) {\n\t\t\tif (JSON.stringify(old_val) !== JSON.stringify(new_val)){\n\t\t\t\tthis.update_posts()\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tget_posts(filters, load_old) {\n\t\t\treturn frappe.db.get_list('Post', {\n\t\t\t\tfields: ['name', 'content', 'owner', 'creation', 'liked_by', 'is_pinned', 'is_globally_pinned'],\n\t\t\t\tfilters: filters,\n\t\t\t\tlimit_start: load_old ? this.posts.length : 0,\n\t\t\t\torder_by: 'is_globally_pinned desc, creation desc',\n\t\t\t})\n\t\t},\n\t\tupdate_posts(load_old = false) {\n\t\t\tif (!this.post_list_filter) return\n\t\t\tthis.loading_posts = true;\n\n\t\t\tconst filters = Object.assign({}, this.post_list_filter);\n\n\t\t\tthis.get_posts(filters, load_old).then((res) => {\n\t\t\t\tif (load_old) {\n\t\t\t\t\tif (!res.length) {\n\t\t\t\t\t\tthis.more_posts_available = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.posts = this.posts.concat(res);\n\t\t\t\t} else {\n\t\t\t\t\tthis.posts = res;\n\t\t\t\t}\n\t\t\t}).finally(() => {\n\t\t\t\tthis.loading_posts = false;\n\t\t\t});\n\t\t},\n\t\thandle_scroll: frappe.utils.debounce(function() {\n\t\t\tconst screen_bottom = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\t\t\tif (screen_bottom && this.more_posts_available) {\n\t\t\t\tif (!this.loading_posts) {\n\t\t\t\t\tthis.update_posts(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 500),\n\t\tdelete_post(index) {\n\t\t\tthis.posts.splice(index, 1);\n\t\t},\n\t},\n\tdestroyed() {\n\t\twindow.removeEventListener('scroll', this.handle_scroll);\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.no-post-message {\n\theight: 200px;\n\ttext-align: center;\n\tvertical-align: middle;\n\tline-height: 200px;\n}\n.flip-list-move, .flip-list-to {\n\ttransition: transform 0.3s;\n}\n</style>\n","<template>\n\t<div class=\"flex flex-column\">\n\t\t<div class=\"user-details\">\n\t\t\t<div class=\"user-avatar\" v-html=\"user_avatar\"></div>\n\t\t\t<a class=\"user_name\" @click=\"go_to_profile_page()\">{{ user.fullname }}</a>\n\t\t</div>\n\t\t<div class=\"links\" v-if=\"frequently_visited_list.length\">\n\t\t\t<div class=\"muted-title\">\n\t\t\t\t{{ __('Frequently Visited Links') }}\n\t\t\t</div>\n\t\t\t<div class=\"flex flex-column\">\n\t\t\t\t<a class=\"route-link\"\n\t\t\t\t\t@click.prevent=\"goto_list(route_obj.route)\"\n\t\t\t\t\tv-for=\"route_obj in frequently_visited_list\"\n\t\t\t\t\t:key=\"route_obj.route\">\n\t\t\t\t\t{{ get_label(route_obj.route) }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tfrequently_visited_list: [],\n\t\t\tuser: frappe.user_info(frappe.session.user),\n\t\t\tuser_avatar: frappe.avatar(this.user_id, 'avatar-xl')\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.set_frequently_visited_list()\n\t},\n\tmethods: {\n\t\tgoto_list(route) {\n\t\t\tfrappe.set_route(route);\n\t\t},\n\t\tset_frequently_visited_list() {\n\t\t\tfrappe.xcall('frappe.social.doctype.post.post.frequently_visited_links')\n\t\t\t\t.then(data => {\n\t\t\t\t\tthis.frequently_visited_list = data;\n\t\t\t\t})\n\t\t},\n\t\tget_label(route) {\n\t\t\treturn frappe.utils.get_route_label(route);\n\t\t},\n\t\tgo_to_profile_page() {\n\t\t\tfrappe.set_route('social', 'profile', this.user.name)\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.route-link {\n\tmargin: 0px 10px 10px 0;\n\ttext-transform: capitalize;\n}\n.stats {\n\tmin-height: 150px\n}\n.links {\n\tmargin-top: 20px;\n}\n.user-details {\n\t.user-avatar {\n\t\t/deep/.avatar-xl {\n\t\t\theight: 150px;\n\t\t\twidth: 150px;\n\t\t}\n\t}\n\t.user_name {\n\t\tdisplay: block;\n\t\tmargin-top: 10px;\n\t\tfont-size: 2rem;\n\t\tfont-weight: 600\n\t}\n}\n</style>\n\n","<template>\n\t<div>\n\t\t<div class=\"muted-title\">{{ __('Upcoming Events') }}</div>\n\t\t<div class=\"event\" v-for=\"event in events\" :key=\"event.name\">\n\t\t\t<span class=\"bold\">{{ get_time(event.starts_on) }}</span>\n\t\t\t<a @click=\"open_event(event)\"> {{ event.subject }}</a>\n\t\t</div>\n\t\t<div class=\"event\" v-if=\"!events.length\">\n\t\t\t{{ __('No Upcoming Events') }}\n\t\t</div>\n\t\t<div class=\"muted-title\">{{ __('Chat') }}</div>\n\t\t<a @click=\"open_chat\">\n\t\t\t{{ __('Open Chat') }}\n\t\t</a>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t'events': []\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.get_events().then((events) => {\n\t\t\tthis.events = events\n\t\t})\n\t},\n\tmethods: {\n\t\tget_events() {\n\t\t\tconst today = frappe.datetime.now_date();\n\t\t\treturn frappe.xcall('frappe.desk.doctype.event.event.get_events', {\n\t\t\t\tstart: today,\n\t\t\t\tend: today\n\t\t\t})\n\t\t},\n\t\topen_chat() {\n\t\t\tsetTimeout(frappe.chat.widget.toggle);\n\t\t},\n\t\tget_time(timestamp) {\n\t\t\treturn frappe.datetime.get_time(timestamp)\n\t\t},\n\t\topen_event(event) {\n\t\t\tfrappe.set_route('Form', 'Event', event.name);\n\t\t}\n\t}\n}\n</script>\n","<template>\n\t<div class=\"wall-container\">\n\t\t<post-sidebar class=\"post-sidebar hidden-xs\"></post-sidebar>\n\t\t<div class=\"post-container\">\n\t\t\t<div\n\t\t\t\tclass=\"new_posts_count\"\n\t\t\t\t@click=\"load_new_posts\"\n\t\t\t\tv-show='new_posts_count'>\n\t\t\t\t{{ new_posts_count + ' new post'}}\n\t\t\t</div>\n\t\t\t<post-loader :post_list_filter=\"{}\"></post-loader>\n\t\t</div>\n\t\t<activity-sidebar class=\"activity-sidebar hidden-xs\"/>\n\t</div>\n</template>\n<script>\nimport PostLoader from '../components/PostLoader.vue';\nimport PostSidebar from '../components/PostSidebar.vue';\nimport ActivitySidebar from '../components/ActivitySidebar.vue';\n\nexport default {\n\tcomponents: {\n\t\tPostLoader,\n\t\tPostSidebar,\n\t\tActivitySidebar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t'posts': [],\n\t\t\t'events': [],\n\t\t\t'new_posts_count': 0,\n\t\t}\n\t},\n\tcreated() {\n\t\tfrappe.realtime.on('new_post', (post_owner) => {\n\t\t\tif (post_owner === frappe.session.user) {\n\t\t\t\tthis.load_new_posts()\n\t\t\t} else {\n\t\t\t\tthis.new_posts_count += 1;\n\t\t\t}\n\t\t})\n\t},\n\tmethods: {\n\t\tload_new_posts() {\n\t\t\tthis.$emit('load_new_posts');\n\t\t\tthis.new_posts_count = 0;\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div class=\"profile-sidebar flex flex-column\">\n\t\t<div class=\"user-details\">\n\t\t\t<h3>{{ user.fullname }}</h3>\n\t\t\t<p>{{ user.bio }}</p>\n\t\t\t<div class=\"location\" v-if=\"user.location\">\n\t\t\t\t<span class=\"text-muted\"><i class=\"fa fa-map-marker\">&nbsp;</i>{{ user.location }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"interest\" v-if=\"user.interest\">\n\t\t\t\t<span class=\"text-muted\"><i class=\"fa fa-puzzle-piece\">&nbsp;</i>{{ user.interest }}</span>\n\t\t\t</div>\n\t\t\t<a v-if=\"show_add_info_link\" @click=\"go_to_user_settings\">{{ __('Add your information') }}</a>\n\t\t</div>\n\t\t<a class=\"home-link\" @click=\"go_to_home()\"> ← {{ __('Back To Home') }}</a>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: {\n\t\t'user_id': String,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t'user': frappe.user_info(this.user_id),\n\t\t\t'show_add_info_link': false\n\t\t}\n\t},\n\tcreated() {\n\t\tif (frappe.social.is_session_user_page() && this.is_info_missing()) {\n\t\t\tthis.show_add_info_link = true;\n\t\t}\n\t},\n\tmethods: {\n\t\tis_info_missing() {\n\t\t\treturn !this.user.location || !this.user.interest || !this.user.bio;\n\t\t},\n\t\tgo_to_home() {\n\t\t\tfrappe.set_route('social', 'home');\n\t\t},\n\t\tgo_to_user_settings() {\n\t\t\tfrappe.set_route('Form', 'User', this.user_id).then(()=> {\n\t\t\t\tfrappe.dom.scroll_to_section('More Information');\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"less\" scoped>\n.profile-sidebar {\n\tpadding: 10px 10px 0 0\n}\n.user-details {\n\tmin-height: 150px;\n\t.location, .interest {\n\t\tmargin-bottom: 10px;\n\t\ti {\n\t\t\twidth: 15px;\n\t\t}\n\t}\n\t.home-link {\n\t\tmargin-top: 15px;\n\t}\n}\n</style>\n","<template>\n\t<div ref=\"banner\" class=\"banner\" :style=\"background_style\">\n\t\t<div\n\t\t\tclass=\"user-avatar container\"\n\t\t\t:class=\"{'editable-image': is_own_profile}\"\n\t\t\t@click=\"update_image\"\n\t\t\tv-html=\"user_avatar\">\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['user_id'],\n\tdata() {\n\t\treturn {\n\t\t\tis_own_profile: this.user_id === frappe.session.user,\n\t\t\tuser_avatar: frappe.avatar(this.user_id, 'avatar-xl'),\n\t\t\tbackground_style: {\n\t\t\t\t'background': '#262626'\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$root.$on('user_image_updated', () => {\n\t\t\tthis.user_avatar = frappe.avatar(this.user_id, 'avatar-xl')\n\t\t})\n\t\tconst user_banner = frappe.user_info(this.user_id).banner_image;\n\t\tif (user_banner) {\n\t\t\tthis.background_style = {\n\t\t\t\t'background-image': `url('${user_banner}')`\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tupdate_image() {\n\t\t\tif (this.is_own_profile) {\n\t\t\t\tfrappe.social.update_user_image.show()\n\t\t\t}\n\t\t}\n\t},\n}\n</script>\n<style lang=\"less\" scoped>\n.banner {\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 300px;\n\tz-index: 101;\n\tposition: absolute;\n\tbackground-size: cover;\n\tbackground-position: center;\n\tbackground-repeat: no-repeat;\n\t.user-avatar {\n\t\tposition: relative;\n\t\t/deep/ .avatar {\n\t\t\ttop: 220px;\n\t\t\tleft: 10px;\n\t\t\twidth: 150px;\n\t\t\theight: 150px;\n\t\t\tborder-radius: 4px;\n\t\t\tbackground: white;\n\t\t\tposition: absolute !important;\n\t\t}\n\t}\n\t.editable-image {\n\t\t/deep/ .avatar {\n\t\t\tcursor: pointer;\n\t\t\t:hover {\n\t\t\t\topacity: 0.9;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n\n","<template>\n\t<div>\n\t\t<div class=\"profile-head\">\n\t\t\t<profile-banner :user_id=\"user_id\"></profile-banner>\n\t\t</div>\n\t\t<div class=\"profile-container\">\n\t\t\t<profile-sidebar\n\t\t\t\t:user_id=\"user_id\"\n\t\t\t\tclass=\"profile-sidebar\"\n\t\t\t/>\n\t\t\t<div class=\"post-container\">\n\t\t\t\t<div class=\"list-options\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"option\"\n\t\t\t\t\t\t:class=\"{'bold': show_list === 'user_posts'}\"\n\t\t\t\t\t\t@click=\"show_list = 'user_posts'\">\n\t\t\t\t\t\t<span>Posts</span>\n\t\t\t\t\t\t<span>({{ user_posts_count }})</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"option\"\n\t\t\t\t\t\t:class=\"{'bold': show_list === 'liked_posts'}\"\n\t\t\t\t\t\t@click=\"show_list = 'liked_posts'\">\n\t\t\t\t\t\t<span>Likes</span>\n\t\t\t\t\t\t<span>({{ liked_posts_count }})</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<post-loader :post_list_filter=\"post_list_filter\"></post-loader>\n\t\t\t</div>\n\t\t\t<activity-sidebar class=\"activity-sidebar hidden-xs\"/>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport PostLoader from '../components/PostLoader.vue';\nimport ProfileSidebar from '../components/ProfileSidebar.vue';\nimport ActivitySidebar from\t'../components/ActivitySidebar.vue';\nimport ProfileBanner from '../components/ProfileBanner.vue';\nexport default {\n\tprops: ['user_id'],\n\tcomponents: {\n\t\tPostLoader,\n\t\tProfileSidebar,\n\t\tProfileBanner,\n\t\tActivitySidebar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow_list: 'user_posts',\n\t\t\tpost_list_filter : null,\n\t\t\tuser_posts_count: 0,\n\t\t\tliked_posts_count: 0,\n\t\t}\n\t},\n\twatch: {\n\t\tshow_list() {\n\t\t\tif (this.show_list == 'user_posts') {\n\t\t\t\tthis.post_list_filter = this.get_user_posts_filter();\n\t\t\t} else if (this.show_list == 'liked_posts') {\n\t\t\t\tthis.post_list_filter = this.get_liked_posts_filter();\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.post_list_filter = this.get_user_posts_filter();\n\t\tthis.set_post_count()\n\t},\n\tmethods: {\n\t\tget_user_posts_filter() {\n\t\t\treturn {\n\t\t\t\t'owner': this.user_id\n\t\t\t}\n\t\t},\n\t\tget_liked_posts_filter() {\n\t\t\treturn {\n\t\t\t\t'liked_by': ['like', '%' + this.user_id + '%']\n\t\t\t}\n\t\t},\n\t\tset_post_count() {\n\t\t\tfrappe.db.count('Post', { filters: this.get_user_posts_filter() })\n\t\t\t\t.then(count => this.user_posts_count = count)\n\n\t\t\tfrappe.db.count('Post', { filters: this.get_liked_posts_filter() })\n\t\t\t\t.then(count => this.liked_posts_count = count)\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.profile-head {\n\theight: 190px;\n}\n.profile-sidebar {\n\tmargin-top: 60px;\n\tflex: 20%;\n}\n.right-sidebar {\n\tmargin-top: 5px;\n}\n.list-options {\n\tdisplay: flex;\n\t.option {\n\t\tcursor: pointer;\n\t\tpadding: 0px 10px 10px 0;\n\t}\n}\n</style>\n","<template>\n\t<div class=\"backdrop\">\n\t\t<img\n\t\t\t:src=\"src\"\n\t\t\t:class=\"{'psuedo-zoom': full_size}\"\n\t\t\t@dblclick=\"full_size = !full_size\"\n\t\t/>\n\t\t<i class=\"fa fa-close close\" @click=\"$root.$emit('hide_preview')\"></i>\n\t</div>\n</template>\n<script>\nexport default {\n\tprops: ['src'],\n\tdata() {\n\t\treturn {\n\t\t\tfull_size: false\n\t\t}\n\t},\n\tcreated() {\n\t\tdocument.addEventListener('keyup', this.close_preview_on_escape);\n\t},\n\tdestroyed() {\n\t\tdocument.removeEventListener('keyup', this.close_preview_on_escape);\n\t},\n\tmethods: {\n\t\tclose_preview_on_escape(e) {\n\t\t\tif (e.keyCode === 27) {\n\t\t\t\tthis.$root.$emit('hide_preview')\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n<style lang=\"less\" scoped>\n.backdrop {\n\tposition: fixed;\n\theight: 100%;\n\twidth: 100%;\n\tbackground: #0000006e;\n\tz-index: 1030;\n\ttop: 0;\n\tright: 0;\n\timg {\n\t\tmargin: auto;\n\t\tdisplay: block;\n\t\twidth: 80%;\n\t\tmax-width: 700px;\n\t\tpadding-top: 100px;\n\t}\n\t.psuedo-zoom {\n\t\tpadding: 10px 0px;\n\t\twidth: auto;\n\t\theight: 100vh;\n\t\tmax-width: initial;\n\t}\n\t.close {\n\t\tposition: absolute;\n\t\ttop: 15px;\n\t\tright: 35px;\n\t\tcolor: black;\n\t\tfont-size: 30px;\n\t}\n}\n</style>\n\n\n","<template>\n\t<div ref=\"social\" class=\"social\">\n\t\t<keep-alive>\n\t\t\t<component :is=\"current_page.component\" v-bind=\"current_page.props\"></component>\n\t\t</keep-alive>\n\t\t<image-viewer :src=\"preview_image_src\" v-if=\"show_preview\"></image-viewer>\n\t</div>\n</template>\n\n<script>\n\nimport Wall from './pages/Wall.vue';\nimport Profile from './pages/Profile.vue';\nimport NotFound from './components/NotFound.vue';\nimport ImageViewer from './components/ImageViewer.vue';\n\nfunction get_route_map() {\n\treturn {\n\t\t'social/home': {\n\t\t\t'component': Wall,\n\t\t\t'props': {}\n\t\t},\n\t\t'social/profile/*': {\n\t\t\t'component': Profile,\n\t\t\t'props': {\n\t\t\t\t'user_id': frappe.get_route()[2],\n\t\t\t\t'key': frappe.get_route()[2]\n\t\t\t}\n\t\t},\n\t\t'not_found': {\n\t\t\t'component': NotFound,\n\t\t}\n\t}\n}\n\nexport default {\n\tcomponents: {\n\t\tImageViewer\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrent_page: this.get_current_page(),\n\t\t\tshow_preview: false,\n\t\t\tpreview_image_src: ''\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$root.$on('show_preview', (src) => {\n\t\t\tthis.preview_image_src = src;\n\t\t\tthis.show_preview = true;\n\t\t})\n\n\t\tthis.$root.$on('hide_preview', () => {\n\t\t\tthis.preview_image_src = '';\n\t\t\tthis.show_preview = false;\n\t\t})\n\n\t\tfrappe.app_updates.on('user_image_updated', () => {\n\t\t\tthis.$root.$emit('user_image_updated')\n\t\t})\n\t},\n\tmounted() {\n\t\tfrappe.route.on('change', () => {\n\t\t\tif (frappe.get_route()[0] === 'social') {\n\t\t\t\tthis.set_current_page();\n\t\t\t\tfrappe.utils.scroll_to(0);\n\t\t\t\t$(\"body\").attr(\"data-route\", frappe.get_route_str());\n\t\t\t}\n\t\t});\n\t\tfrappe.ui.setup_like_popover($(this.$refs.social), '.likes', false);\n\t},\n\tmethods: {\n\t\tset_current_page() {\n\t\t\tthis.current_page = this.get_current_page();\n\t\t},\n\t\tget_current_page() {\n\t\t\tconst route_map = get_route_map();\n\t\t\tconst route = frappe.get_route_str();\n\t\t\tif (route_map[route]) {\n\t\t\t\treturn route_map[route];\n\t\t\t} else {\n\t\t\t\treturn route_map[route.substring(0, route.lastIndexOf('/')) + '/*'] || route_map['not_found']\n\t\t\t}\n\t\t},\n\t}\n}\n</script>\n","import Home from './Home.vue';\n\nfrappe.provide('frappe.social');\n\nfrappe.social.Home = class SocialHome {\n\tconstructor({ parent }) {\n\t\tthis.$parent = $(parent);\n\t\tthis.page = parent.page;\n\t\tthis.setup_header();\n\t\tthis.make_body();\n\t\tthis.set_primary_action();\n\t}\n\tmake_body() {\n\t\tthis.$social_container = this.$parent.find('.layout-main');\n\t\tfrappe.require('/assets/js/frappe-vue.min.js', () => {\n\t\t\tnew Vue({\n\t\t\t\tel: this.$social_container[0],\n\t\t\t\trender: h => h(Home)\n\t\t\t});\n\t\t});\n\t}\n\tsetup_header() {\n\t\tthis.page.set_title(__('Social'));\n\t}\n\tset_primary_action() {\n\t\tthis.page.set_primary_action(__('Post'), () => {\n\t\t\tfrappe.social.post_dialog.show();\n\t\t});\n\t}\n};\n\nfrappe.social.post_dialog = new frappe.ui.Dialog({\n\ttitle: __('Create Post'),\n\tfields: [\n\t\t{\n\t\t\tfieldtype: \"Text Editor\",\n\t\t\tfieldname: \"content\",\n\t\t\tlabel: __(\"Content\"),\n\t\t\treqd: 1\n\t\t}\n\t],\n\tprimary_action_label: __('Post'),\n\tprimary_action: (values) => {\n\t\tfrappe.social.post_dialog.disable_primary_action();\n\t\tconst post = frappe.model.get_new_doc('Post');\n\t\tpost.content = values.content;\n\t\tfrappe.db.insert(post).then(() => {\n\t\t\tfrappe.social.post_dialog.clear();\n\t\t\tfrappe.social.post_dialog.hide();\n\t\t}).finally(() => {\n\t\t\tfrappe.social.post_dialog.enable_primary_action();\n\t\t});\n\t}\n});\n\nfrappe.social.update_user_image = new frappe.ui.Dialog({\n\ttitle: __(\"User Image\"),\n\tfields: [\n\t\t{\n\t\t\tfieldtype: \"Attach Image\",\n\t\t\tfieldname: \"image\",\n\t\t\tlabel: __(\"Image\"),\n\t\t\treqd: 1,\n\t\t\tdefault: frappe.user.image()\n\t\t},\n\t],\n\tprimary_action_label: __('Set Image'),\n\tprimary_action: (values) => {\n\t\tconst user = frappe.session.user;\n\t\tfrappe.db.set_value('User', user, 'user_image', values.image)\n\t\t\t.then((resp) => {\n\t\t\t\tfrappe.boot.user_info[user].image = resp.message.user_image;\n\t\t\t\tfrappe.app_updates.trigger('user_image_updated');\n\t\t\t\tfrappe.social.update_user_image.clear();\n\t\t\t\tfrappe.social.update_user_image.hide();\n\t\t\t})\n\t\t\t.fail((err) => {\n\t\t\t\tfrappe.msgprint(err);\n\t\t\t});\n\t}\n});\n\nfrappe.social.is_home_page = () => {\n\treturn frappe.get_route()[0] === 'social' && frappe.get_route()[1] === 'home';\n};\n\nfrappe.social.is_profile_page = (user) => {\n\treturn frappe.get_route()[0] === 'social'\n\t\t&& frappe.get_route()[1] === 'profile'\n\t\t&& (user ? frappe.get_route()[2] === user : true);\n};\n\nfrappe.social.is_session_user_page = () => {\n\treturn frappe.social.is_profile_page() && frappe.get_route()[2] === frappe.session.user;\n};\n\nfrappe.provide('frappe.app_updates');\n\nfrappe.utils.make_event_emitter(frappe.app_updates);\n"],"names":["const","this"],"mappings":";;;;;;;;;;;;;;;;AAaA;;;;;;;;;;;;;;;;;;;;;;;aAVYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0BZ;;;;;;;;;;;;;;;;;;;;;;;;;aA1BYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACQZ;;;;;aARYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoCZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aApCYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2BZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aA3BYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmBZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAnBYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACcZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAdYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiBZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAjBYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACcZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAdYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACQZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aARYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmCZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAnCYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACQZ;;;;;;;;;;;;;;;;;;;;;;;aARYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCaZ;;;;;;;;;;;;;;;;;;;AAmBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAhCYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCDZ,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;;CAEhC,MAAM,CAAC,MAAM,CAAC,IA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"}